<?php
/**
 * JsonData.php
 *
 * @category   BaseZF
 * @package    BaseZF_Framwork
 * @copyright  Copyright (c) 2008 BaseZF
 * @author     Harold ThÃ©tiot (hthetiot)
 */

class BaseZF_Framework_View_Helper_GeSHi extends BaseZF_Framework_View_Helper_Abstract
{
    static $_GESHi_INSTANCE = null;

    public function GeSHi($source = '', $language = '')
    {
        // little singleton pattern for GeSHi Class
        if (self::$_GESHi_INSTANCE === null) {

            require_once(PATH_TO_LIBRARY . '/geshi.php');
            $geshi = self::$_GESHi_INSTANCE = new GeSHi();
            $geshi->set_language_path(PATH_TO_LIBRARY . '/geshi');
            $geshi->enable_classes();

        } else {
            $geshi = self::$_GESHi_INSTANCE;
        }

        if (!empty($source)) {
            $geshi->set_source($source);
        }

        if (!empty($language)) {
            $geshi->set_language($language);
        }

        echo $geshi->parse_code();
    }
}

